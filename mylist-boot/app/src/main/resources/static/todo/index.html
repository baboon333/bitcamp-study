<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>To-do</title>
</head>
<body>
  <h1>To-do</h1>
  <a href="form.html">추가</a>
  <table id="x-todo-table" border="1">
  <thead>
  <tr>
    <th>해야할 일</th>
    <th>완료</th>
    <th>삭제</th>
  </tr>
  </thead>
  <tbody>
  </tbody>
  </table>

<script>
  var tbody = document.querySelector("#x-todo-table tbody");

  // 삭제 버튼을 클릭했을 때 호출될 리스너 등록하기
  // => 삭제 버튼은 동적으로 생성된다.                // 버튼이 생성되는 코드가 밑에 있으니 var btn = document.getElementsByTagName("button"); 이걸로는 못찾음! 아직 버튼 만들어지는 코드 실행 전이니까.
  // => 따라서 부모 태그에 리스너를 등록해야 한다.
  tbody.onclick = function(e) {
    if (e.target.localName = "button") {  // 첫 번째 방법
      // if (e.target instanceof HTMLButtonElement) {   //두 번째 방법
      console.log("okok!!!");
    }   //localName : 태그명
  };

  fetch("/todo/list")
    .then(function(response) {
      return response.json();  //json 형식의 문자열을 자바스크립트 객체로 바꿔라 //서버에서 받은 json 형식의 문자열을 js 객체로 전환하여 다룬다.
    })
    .then(function(todoList) {
      console.log(todoList);

      for (var i = 0; i < todoList.length; i++) {
        var tr = document.createElement("tr");
        tr.innerHTML = `<td>${todoList[i].title}</td>
        <td><input type="checkbox" id=""></td>
        <td><buttontype="button">삭제</td>`
        tbody.appendChild(tr);
      }
    })
  //연락처 입력 구현
</script>






















</body>
</html>

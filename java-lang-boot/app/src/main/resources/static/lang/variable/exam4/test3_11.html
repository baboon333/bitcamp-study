<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>변수 활용</title>
</head>
<body>

<h1>배열 다루기</h1>
<button type="button" id="x-btn">배열 가져오기</button>
<ul id="x-namelist">
</ul>

<script>
var xNamelist = document.querySelector("#x-namelist");
var xBtn = document.querySelector("#x-btn");

xBtn.addEventListener("click", function() {
  var xhr = new XMLHttpRequest();
  xhr.onload = function() {
    // 서버에서 받은 JSON 형식의 배열을 자바스크립트 배열로 변환한다.
    var names = JSON.parse(xhr.responseText);

    
    // 반복문을 직접 실행하는 대신에 그 일을 할 함수를 호출한다.
    forEach(names, function(name) {
      var li = document.createElement("li"); // <li></li>
      li.innerHTML = name; // <li>홍길동</li>
      xNamelist.appendChild(li);    //원래 html에 있던 li 태그 지우고 윗줄에서 만든 li 태그 배열돌려서 넣는거임!
    });
  };
  xhr.open("GET", "/lang/variable/exam4/test3", true);
  xhr.send();
});

function forEach(arr, cb) { //내가 각각에 대해서 배열을 돌려줄게. cb는 callback의 약자. 두번째 값으로 함수를 받는다는 거임. 내가 호출하는게 아니라 for each에서 호출하는 call back 함수!
	  for(var item of arr) {
		  cb(item);
	  }	
}
</script>

</body>
</html>











